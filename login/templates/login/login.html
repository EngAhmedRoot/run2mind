{% load i18n %}
{% load static %}
{% get_current_language as LANGUAGE_CODE %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>{% block title %}Login{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<link rel="stylesheet" href="{% static '/login/css/style.css' %}">

</head>

<body>

    <div class="auth-page">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-5 login">
                    <div class="auth-content p-3 p-lg-4">
                        <!--  -->
                        <div class="d-flex align-items-center justify-content-between">
                            <a href="index-ar.html">
                                <img src="{% static '/login/images/logo.png' %}" width="100px" class="auth-logo img-fluid"
                                    alt="run 2 mind" loading="lazy" decoding="async" />
                            </a>


                            <!-- Select Language -->
                            <div class="select-language">
							{% if LANGUAGE_CODE == 'en' %}
								<div class="header d-flex align-items-center cursor-pointer px-3 py-2">
                                    <span>
                                        <img src="{% static '/login/images/en.png' %}" width="27px" height="20px" loading="lazy" decoding="async"
                                            alt="">
                                    </span>
                                    <span class="text px-1 px-lg-2 fs-7">English</span>
                                   
                                </div>
                                <div  class="body d-flex align-items-center cursor-pointer"  >
                                    <span>

                                        <img src="{% static '/login/images/ar.png' %}" width="27px" height="20px" loading="lazy" decoding="async"
                                            alt="">
                                    </span>
                                    <span class="text px-1 px-lg-2 fs-7"  >العربيه</span>
                                </div>
                            {% else %}
                                <div class="header d-flex align-items-center cursor-pointer px-3 py-2">
                                    <span>
                                        <img src="{% static '/login/images/ar.png' %}" width="27px" height="20px" loading="lazy" decoding="async"
                                            alt="">
                                    </span>
                                    <span class="text px-1 px-lg-2 fs-7">العربيه</span>
                                   
                                </div>
                                <div  class="body d-flex align-items-center cursor-pointer"  >
                                    <span>

                                        <img src="{% static '/login/images/en.png' %}" width="27px" height="20px" loading="lazy" decoding="async"
                                            alt="">
                                    </span>
                                    <span class="text px-1 px-lg-2 fs-7"  >English</span>
                                </div>
							{% endif %}
                            </div>
							
							
                        </div>

                        <!-- Title -->
                        <div class="auth-title text-center my-3">
                            <h1 class="fs-1 fw-600 cl-main mb-0 mb-md-1">Login</h1>
                            <p class="fs-7 fw-600 cl-secondary">Welcome Back</p>

                            <!-- Login with google & facebook-->
                            <div class="login_option">

                                <!-- Google button -->
                                <div class="option">
                                  <a href="{% url 'social:begin' 'google-oauth2' %}">
                                    <img src="{% static '/login/images/google-color-svgrepo-com.svg' %}" alt="Google" />
                                    <span>Login With Google</span>
                                  </a>
                                </div>
								<!-- Debugging link -->
<script>
    console.log(document.getElementById('google-login-link').href);
</script>
                        
                                <!-- Facebook button -->
                                <div class="option">
                                  <a href="#">
                                    <img src="{% static '/login/images/facebook-color-svgrepo-com.png' %}" alt="Facebook" />
                                    <span>Login With Facebook</span>
                                  </a>
                                </div>
                              </div>
                        </div>

                        <!-- Login option separator -->
                         <div class="spe">
                            <p class="separator">
                                <span>OR</span>
                            </p>
                        </div>

                        <!-- Login Form -->
						<form id="auth-form" class="mt-3 mt-lg-5" name="loginform" action="{% url 'login:login' %}" method="post">
                           {%csrf_token%}
						   <!-- Email Input -->
                            <div class="input-container mb-3 mb-md-4">
                                <div class="input">
                                    
									<input type="email" id="username" name="username" placeholder="{% trans "Username" %}" class="px-3 w-100" value="admin@admin.com">
									{{ login_form.username.errors }}
                                    <label for="email" class="input-label">Email</label>
                                </div>
                                <div class="err-msg pt-1 fs-8"></div>
                            </div>

                            <!--  Password Input -->
                           
                            <div class="input-container input-password mb-2 mb-md-3">
                                <div class="input">
                                    
									<input type="password" id="password" name="password" placeholder="{% trans "Password" %}" class="password px-3 w-100" value="123456">	
                                    
									<label for="password" class="input-label">Password</label>
                                    <div class="password-icon">
                                        <img src="{% static '/login/images/hide.svg' %}" alt="">
										
                                    </div>
									{{ login_form.password.errors }}
                                </div>
                                <!-- <div class="input-password">
                                </div> -->
                                <div class="err-msg pt-1 fs-8"></div>
                            </div>

                            <div class="form-check input-container pt-2 mb-lg-4">
                                <div class="d-flex justify-content-end">
                                    <a href="reset-password.html" class="fs-7 cl-main mb-1">Forgot password?</a>
                                </div>
                                <!-- <input class="form-check-input" type="checkbox" value="" id="accept-terms">
                                <label class="form-check-label fs-6" for="flexCheckDefault">
                                    <span class="cl-secondary">I agree with the</span>
                                    <a href="privacy-policy.html" class="cl-main text-decoration-underline">Privacy
                                        Policy</a>
                                </label> -->
                                <div class="err-msg pt-1 fs-8"></div>
                            </div>


                            <!-- Submit Btn -->
                            <button id="login" class="btn-main primary w-100 mt-3 mt-lg-4 mb-2 mb-lg-4"
                                type="submit">{% trans "Login" %}</button>
                           
                            <!--  -->
                            <div class="fs-7 pt-2">
                                <span class="cl-darkLight">Do not have an account, please,</span>
                                <span class="cl-darkLight fw-500">Make New User?</span>
                                <a href="{% url 'login:patientsignup' %}" class="fw-500 cl-secondary text-decoration-underline">Start
                                    now</a>
                            </div>


                            <!--  -->

                            <p class="fs-7 cl-main mt-3 mt-lg-4 mb-4 mb-lg-5 text-justify">
                                Stay connected and never miss an update! Subscribe to our newsletter and be the first to
                                receive the latest news, exclusive offers and valuable insights directly into your
                                inbox. Join our community today and be part of the journey!
                            </p>


                            <!-- Footer ==> Copyright -->
                            <p class="cl-darkLight fs-7 fw-500 text-center">
                                Copyright © 2024 All rights reserved to run2mind <br>
                                Design & develop by <a href="" target="_blank" class="cl-main">Polymotech Co.</a>
                            </p>
                        </form>
                    </div>
                </div>
                <div class="col-lg-7 p-0">
                    <div class="auth-img h-100 d-flex justify-content-center align-items-center pt-4 pt-lg-0">
                        <div class="row justify-content-center">
                            <div class="col-lg-8 col-md-7 col-sm-9 col-11">
                                <div class="auth-img_content px-1 py-3 p-md-3">
                                    <img src="{% static 'login/images/login-img.png' %}" class="img-fluid" alt="login-img"
                                        loading="lazy" decoding="async" />
										

                                    <div class="text-container pb-4 px-3">
                                        <h6 class="text text-white">
                                            With us, we connect you with the best doctors and psychotherapists for a
                                            better life
                                        </h6>
                                        <h4 class="title text-white fw-600 mb-2 mb-md-4 pt-4">
                                            And talk to a psychiatrist
                                            or psychiatrist in all privacy and safety!
                                        </h4>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

            </div>
        </div>

    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
		<!-- إضافة مكتبة jQuery عبر CDN -->
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


	<script src="{% static '/login/js/main.js' %}"></script>
<script>
$(document).ready(function () {
    const $html = $("html");
    const $languageContainers = $(".select-language");

    if (!$html.attr("dir")) {
        $html.attr("dir", "ltr");
        $html.attr("lang", "en");
    }

    if ($languageContainers.length !== 0) {
        $languageContainers.on("click", function (e) {
            const $langContainer = $(this);

            $langContainer.toggleClass("open");

            if ($(e.target).closest('.body').length > 0) {
                let newLanguage = "";
                let newDir = "";
                let newUrl = "";

                if ($html.attr("dir") === "ltr") {
                    $html.attr("dir", "rtl");
                    $html.attr("lang", "ar");
                    newLanguage = "ar";
                    newDir = "rtl";
                } else {
                    $html.attr("dir", "ltr");
                    $html.attr("lang", "en");
                    newLanguage = "en";
                    newDir = "ltr";
                }

                localStorage.setItem("language", newLanguage);
                localStorage.setItem("dir", newDir);

                const currentUrl = window.location.href;
                const urlParts = currentUrl.split('/');

                if (newLanguage === "ar") {
                    urlParts[3] = "ar"; 
                } else {
                    urlParts[3] = "en"; 
                }

                newUrl = urlParts.join('/');
                window.location.href = newUrl;
            }
        });
    }

    const savedLanguage = localStorage.getItem("language");
    const savedDir = localStorage.getItem("dir");

    if (savedLanguage && savedDir) {
        $html.attr("lang", savedLanguage);
        $html.attr("dir", savedDir);
    }
});
</script>


</body>

</html>