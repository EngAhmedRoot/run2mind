{% extends 'clinics/base.html'%}
{% load i18n %}

{% block title %}
    {% if 'add' in request.path %}
        {% trans "Add User_Group" %}
    {% else %}
        {% trans "Update User_Group" %}
    {% endif %}
{% endblock %}

{% block content_area %}

<div id="content" class="main-content">
<div class="layout-px-spacing">
    <div class="contact-us layout-top-spacing">
        <div class="cu-contact-section" >
            <div class="contact-form">
                <form method="post">
                    <div class="mb-4 cu-section-header">
                        {% if 'add' in request.path %}
                            <h3>{% trans 'New User_Group' %}</h3>
                        {% else %}
                            <h3>{% trans 'Update User_Group' %}</h3>
                        {% endif %}
                    </div>
                   
                    {% csrf_token %}
                    

                    <!-- User Information -->
                    <div class="row">
						<div class="col-4">
                            <label class="input-group-label">{% trans 'User Name' %}</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <svg class="input-group-svg"  xmlns="http://www.w3.org/2000/svg" fill="#1f9f70" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user-check">
											<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
											<circle cx="12" cy="7" r="4"></circle>
											<path d="M16 11l2 2 4-4"></path>
										</svg>

                                    </span>
                                </div>
                                {{ form.username }}
                            </div>
                            <div class="input-group-error">{{ form.username.errors }}</div>
                        </div>
						<div class="col-4">
                            <label class="input-group-label">{% trans 'User GroupType' %}</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <svg  class="input-group-svg"  xmlns="http://www.w3.org/2000/svg" fill="#1f9f70" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-check-circle">
											<path d="M9 11l3 3L22 4"></path><circle cx="12" cy="12" r="10"></circle>
										</svg>
                                    </span>
                                </div>
                                {{ form.user_type }}
                            </div>
                            <div class="input-group-error">{{ form.user_type.errors }}</div>
                        </div>
						<div class="col-4">
                            <label class="input-group-label">{% trans 'User Group' %}</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <svg  class="input-group-svg"  xmlns="http://www.w3.org/2000/svg" fill="#1f9f70" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-check-circle">
											<path d="M9 11l3 3L22 4"></path><circle cx="12" cy="12" r="10"></circle>
										</svg>
                                    </span>
                                </div>
                                {{ form.user_group_message }}
                            </div>
                            <div class="input-group-error">{{ form.user_group_message.errors }}</div>
                        </div>
							
					</div>
						
						
					<div class="row">
						<div class="col-4">
                            <label class="input-group-label">{% trans 'First Name' %}</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <svg class="input-group-svg" xmlns="http://www.w3.org/2000/svg" fill="#1f9f70" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user">
                                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                            <circle cx="12" cy="7" r="4"></circle>
                                        </svg>
                                </div>
                                {{ form.first_name }}
                            </div>
                            <div class="input-group-error">{{ form.first_name.errors }}</div>
                        </div>
						<div class="col-4">
                            <label class="input-group-label">{% trans 'Last Name' %}</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <svg class="input-group-svg" xmlns="http://www.w3.org/2000/svg" fill="#1f9f70" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user">
                                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                            <circle cx="12" cy="7" r="4"></circle>
                                        </svg>
                                    </span>
                                </div>
                                {{ form.last_name }}
                            </div>
                            <div class="input-group-error">{{ form.last_name.errors }}</div>
                        </div>
						
						<div class="col-4">
                            <label class="input-group-label">{% trans 'Email' %}</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <svg class="input-group-svg" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-at-sign">
                                            <circle cx="12" cy="12" r="4"></circle>
                                            <path d="M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-3.92 7.94"></path>
                                        </svg>
                                    </span>
                                </div>
                                {{ form.email }}
                            </div>
                            <div class="input-group-error">{{ form.email.errors }}</div>
                        </div>
		
					</div>
							
 
					<div class="row">
						<div class="col-4">
                            <label class="input-group-label">{% trans 'Password' %}</label>
                            <div class="input-group" style="height:48px;">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <svg class="input-group-svg" xmlns="http://www.w3.org/2000/svg" fill="#1f9f70" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-lock">
											<rect x="3" y="11" width="18" height="10" rx="2" ry="2"></rect>
											<path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
										</svg>
                                    </span>
                                </div>
                                {{ form.password1 }}
                            </div>
                            <div class="input-group-error">{{ form.password1.errors }}</div>
                        </div>
						<div class="col-4">
                            <label class="input-group-label">{% trans 'Confirm Password' %}</label>
                            <div class="input-group" style="height:48px;">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <svg class="input-group-svg" xmlns="http://www.w3.org/2000/svg" fill="#1f9f70" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-lock">
											<rect x="3" y="11" width="18" height="10" rx="2" ry="2"></rect>
											<path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
										</svg>
                                    </span>
                                </div>
                                {{ form.password2 }}
                            </div>
                            <div class="input-group-error">{{ form.password2.errors }}</div>
                        </div>
						
						<div class="col-3">
							<label class="input-group-label">{% trans 'User Status' %}</label>
							<div class="input-group">
								<div class="form-group" style="border: 1px solid #ddd; padding: 5px; border-radius: 5px; width: 100%; display: flex; align-items: center; gap: 5px; background-color: #ffffff; height:48px;">
									<div class="input-group-prepend" style="margin-right: 0;">
										<span class="input-group-text"  style="background-color: #f0f0f0; border: none; border-radius: 50%; padding: 5px;">
											<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#1f9f70" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-power">
												<path d="M12 2v10M5 12a7 7 0 1 0 14 0 7 7 0 1 0-14 0z"></path>
											</svg>
										</span>
									</div>
									<div class="custom-radio" style="width:100%; font-size: 15px;  margin-left: 10px;">
										<div class="radio-options" style="display: flex; gap: 20px;">
											{% for radio in form.is_active %}
											<label style="font-size: 18px; display: flex; align-items: center; gap: 2px; {% if radio.choice_label == 'Active' %} color: #1f9f70; {% elif radio.choice_label == 'Deactive' %} color: red; {% endif %}">
												{{ radio.tag }} {{ radio.choice_label }}
											</label>
											{% endfor %}
										</div>
									</div>
								</div>
								<div class="input-group-error">{{ form.is_active.errors }}</div>
							</div>	
						</div>
							
					</div>
						
						
						
						
						
					<!-- Form Buttons -->
					<div class="row mt-3">
						<div class="col-4"></div>
						<div class="col-2">
							<button type="submit" class="btn btn-primary" style="width: 100%; text-align: center;">{% trans 'Save' %}</button>
						</div>
						<div  class="col-2">
							<button class="btn btn-warning" style="width: 100%; text-align: center;" onclick="location.href='/{{LANGUAGE_CODE}}/customusers/list';">
								{% trans "Cancel" %}
							</button>
						</div>	
					</div>									
                </form>
            </div>
        </div>
    </div>
</div>
</div>
<!-- END CONTENT AREA   -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
$(document).ready(function() {
    $('#id_user_type').change(function() {
        var userType = $(this).val();
        $.ajax({
            url: '/customusers/get_user_group_message/',
            data: {
                'user_type': userType
            },
            dataType: 'json',
            success: function(data) {
                $('#id_user_group_message').val(data.message);
            }
        });
    });
});
</script>

	{% if messages %}
	<script>
		window.onload = function() {
			const soundsPath = "./assets/clinics/plugins/lobibox/sounds/";
		
			{% for message in messages %}
				{% if 'error' in message.tags %}
					Lobibox.notify('error', {
						title: '{% if LANGUAGE_CODE == "ar" %}خطأ{% else %}Error{% endif %}',
						msg: '{{ message }}',
						position: '{% if LANGUAGE_CODE == "ar" %}bottom left{% else %}bottom right{% endif %}',
						sound: soundsPath + 'sound3.ogg',
						delay: 8000,
						showClass: 'fadeInDown',
						hideClass: 'fadeUpDown',
						width: 380,
						height: 150,
						icon: 'fas fa-times-circle',
						closeOnClick: false
					});
				{% endif %}
			{% endfor %}
		};
	</script>
	{% endif %} 

{% endblock %}
